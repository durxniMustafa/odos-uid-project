/* =============================================
   Global Reset & Variables
   ============================================= */
   *,
   *::before,
   *::after {
     box-sizing: border-box;
     margin: 0;
     padding: 0;
   }
   
   /* Global Focus Outline for Accessibility */
   :focus {
     outline: 2px solid var(--primary-color);
     outline-offset: 2px;
   }
   
   :root {
     --primary-color: #7c3aed;
     --primary-hover: #6931c1;
     --secondary-bg: #eeeafc;
     --text-color: #333;
     --card-bg: #fff;
     --border-color: #ddd;
     --shadow-color: rgba(0, 0, 0, 0.1);
     --transition-speed: 0.3s;
     --ease-out: cubic-bezier(0.25, 0.8, 0.25, 1);
     --font-base: "Poppins", sans-serif;
   }
   
   /* Dark Mode Overrides (enable by adding .dark-mode to body) */
   .dark-mode {
     --primary-color: #8a2be2;
     --primary-hover: #6a1cb0;
     --secondary-bg: #2e2e2e;
     --text-color: #eaeaea;
     --card-bg: #333;
     --border-color: #444;
     --shadow-color: rgba(0, 0, 0, 0.5);
     background-color: #1c1c1c;
   }
   
   html {
     scroll-behavior: smooth;
   }
   
   body {
     font-family: var(--font-base);
     background-color: #f9f9f9;
     color: var(--text-color);
     line-height: 1.6;
     padding-bottom: 40px;
     position: relative;
   }
   
   /* Subtle texture overlay for depth */
   body::before {
     content: "";
     position: fixed;
     top: 0;
     left: 0;
     right: 0;
     bottom: 0;
     background-image: url('https://www.transparenttextures.com/patterns/diagmonds.png');
     opacity: 0.05;
     z-index: -1;
   }
   
   /* Utility Container */
   .container {
     width: 90%;
     max-width: 1200px;
     margin: 40px auto;
     padding: 0 15px;
   }
   
   /* =============================================
      Patient Detail Page Layout
      ============================================= */
   .patient-detail-page {
     padding: 40px 0 60px;
     background: var(--card-bg);
     border-radius: 16px;
     box-shadow: 0 8px 20px var(--shadow-color);
     margin-bottom: 40px;
   }
   
   /* Back Button */
   .back-button {
     background-color: #6a1b9a;
     color: #fff;
     padding: 8px 16px;
     border-radius: 20px;
     font-size: 14px;
     margin-bottom: 20px;
     transition: background var(--transition-speed) var(--ease-out), transform 0.2s var(--ease-out);
   }
   .back-button:hover {
     background-color: #5e1480;
     transform: translateY(-1px);
     box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
   }
   
   /* Header Section */
   .header-section {
     display: flex;
     align-items: center;
     justify-content: space-between;
     margin-bottom: 30px;
   }
   .detail-header {
     font-size: 24px;
     color: #6a1b9a;
     font-weight: 600;
   }
   .favorite-button {
     background: none;
     color: #ff9800;
     font-size: 20px;
     transition: transform 0.3s var(--ease-out);
   }
   .favorite-button:hover {
     transform: scale(1.1);
   }
   
   /* Patient Info Card */
   .patient-info-card {
     display: flex;
     background-color: var(--card-bg);
     border-radius: 15px;
     box-shadow: 0 4px 10px var(--shadow-color);
     padding: 30px;
     margin-bottom: 30px;
     align-items: center;
     gap: 30px;
     transition: transform var(--transition-speed) var(--ease-out), box-shadow var(--transition-speed) var(--ease-out);
   }
   .patient-info-card:hover {
     transform: translateY(-5px);
     box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
   }
   .patient-photo {
     width: 120px;
     height: 120px;
     border-radius: 50%;
     border: 3px solid #6a1b9a;
     object-fit: cover;
     transition: transform var(--transition-speed) var(--ease-out);
   }
   .patient-photo:hover {
     transform: scale(1.05);
   }
   .patient-details p {
     margin: 8px 0;
     font-size: 14px;
     color: #555;
   }
   .patient-details strong {
     font-weight: 600;
     color: #6a1b9a;
   }
   
   /* Signature Preview */
   .signature-preview {
     margin-top: 12px;
   }
   .signature-preview .signature-wrapper img {
     max-width: 200px;
     border: 2px solid #ddd;
     border-radius: 8px;
     transition: transform 0.3s var(--ease-out);
   }
   .signature-preview .signature-wrapper img:hover {
     transform: scale(1.03);
   }
   
   /* Notes Section */
   .notes-card {
     background: var(--card-bg);
     border-radius: 15px;
     padding: 20px 25px;
     box-shadow: 0 4px 10px var(--shadow-color);
     margin-bottom: 30px;
     transition: transform var(--transition-speed) var(--ease-out);
   }
   .notes-card:hover {
     transform: translateY(-3px);
   }
   .notes-header {
     display: flex;
     justify-content: space-between;
     align-items: center;
     margin-bottom: 15px;
   }
   .notes-header h3 {
     color: #6a1b9a;
     font-size: 18px;
     font-weight: 600;
   }
   .notes-actions-bar button {
     background: #6a1b9a;
     color: #fff;
     padding: 6px 12px;
     border-radius: 20px;
     font-size: 14px;
     display: inline-flex;
     align-items: center;
     gap: 5px;
     transition: background var(--transition-speed) var(--ease-out), transform 0.2s var(--ease-out);
   }
   .notes-actions-bar button:hover {
     background: #5e1480;
     transform: translateY(-1px);
     box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
   }
   .edit-notes textarea {
     width: 100%;
     height: 100px;
     padding: 10px;
     border-radius: 10px;
     border: 1px solid var(--border-color);
     font-size: 14px;
     background: #f9f9f9;
     transition: border var(--transition-speed) var(--ease-out), box-shadow var(--transition-speed) var(--ease-out);
   }
   .edit-notes textarea:focus {
     border: 1px solid #6a1b9a;
     box-shadow: 0 0 4px rgba(106, 27, 154, 0.3);
   }
   
   /* File Upload Section */
   .file-upload-section {
     background: var(--card-bg);
     border-radius: 15px;
     padding: 20px 25px;
     box-shadow: 0 4px 10px var(--shadow-color);
     margin-bottom: 30px;
     position: relative;
     display: flex;
     flex-direction: column;
     gap: 15px;
     transition: background 0.3s var(--ease-out), border 0.3s var(--ease-out);
   }
   .file-upload-section.drag-over {
     border: 2px dashed var(--primary-color);
     background: rgba(106, 27, 154, 0.05);
   }
   .file-upload-label {
     font-size: 14px;
     font-weight: 600;
     color: #6a1b9a;
     cursor: pointer;
     text-decoration: underline;
     text-align: center;
     transition: color 0.3s var(--ease-out);
   }
   .file-upload-label:hover {
     color: var(--primary-hover);
   }
   .upload-button {
     display: inline-flex;
     align-items: center;
     background: #6a1b9a;
     color: #fff;
     padding: 8px 14px;
     border-radius: 20px;
     font-size: 14px;
     font-weight: 600;
     transition: background 0.3s var(--ease-out), transform 0.2s var(--ease-out);
   }
   .upload-button:hover {
     background: #5e1480;
     transform: translateY(-1px);
     box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
   }
   
   /* AI Upload Steps */
   .upload-steps {
     background: var(--card-bg);
     border-radius: 10px;
     padding: 20px;
     box-shadow: 0 4px 10px var(--shadow-color);
     margin: 20px 0;
     text-align: center;
     transition: transform 0.3s var(--ease-out);
   }
   .upload-steps h3 {
     margin-bottom: 20px;
     font-size: 18px;
     color: #333;
     font-weight: 600;
   }
   .steps-container {
     display: flex;
     justify-content: space-between;
     flex-wrap: wrap;
     gap: 10px;
   }
   .step {
     flex: 1;
     background: #f0f0f0;
     padding: 10px;
     border-radius: 8px;
     text-align: center;
     font-size: 14px;
     color: #555;
     transition: background 0.3s var(--ease-out), color 0.3s var(--ease-out);
   }
   .step.completed {
     background: linear-gradient(135deg, #6a1b9a, #4a90e2);
     color: #fff;
     font-weight: 600;
   }
   
   /* Brain Files Filter */
   .brain-files-filter {
     display: flex;
     align-items: center;
     background: var(--card-bg);
     border-radius: 20px;
     box-shadow: 0 4px 10px var(--shadow-color);
     padding: 8px 15px;
     margin-bottom: 30px;
     max-width: 400px;
     transition: background 0.3s var(--ease-out);
   }
   .search-icon {
     font-size: 14px;
     margin-right: 8px;
     color: #6a1b9a;
   }
   .brain-file-search-input {
     border: none;
     outline: none;
     font-size: 14px;
     width: 100%;
   }
   
   /* Retraining, Share & PDF Section */
   .retraining-section {
     margin: 20px 0;
     text-align: center;
   }
   .share-section {
     display: flex;
     justify-content: center;
     margin-bottom: 40px;
   }
   .share-button {
     background: #6a1b9a;
     color: #fff;
     padding: 8px 16px;
     border-radius: 20px;
     font-size: 14px;
     display: flex;
     align-items: center;
     gap: 5px;
     transition: background 0.3s var(--ease-out), transform 0.2s var(--ease-out);
   }
   .share-button:hover {
     background: #5e1480;
     transform: translateY(-1px);
     box-shadow: 0 3px 6px var(--shadow-color);
   }
   .print-button {
     background: #6a1b9a;
     color: #fff;
     border-radius: 20px;
     padding: 8px 16px;
     font-size: 14px;
     font-weight: 600;
     display: inline-flex;
     align-items: center;
     gap: 8px;
     transition: background 0.3s var(--ease-out), transform 0.2s var(--ease-out);
     box-shadow: 0 3px 6px var(--shadow-color);
   }
   .print-button:hover {
     transform: translateY(-2px);
     box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
   }
   .print-button:active {
     background: #5a28a0;
     transform: translateY(0);
     box-shadow: 0 3px 6px var(--shadow-color);
   }
   .print-button:focus {
     outline: 2px solid rgba(124, 58, 237, 0.5);
     outline-offset: 2px;
   }
   
   /* =============================================
      Modal Overlay & Confirmation Dialog
      ============================================= */
   .modal-overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100vw;
     height: 100vh;
     background: rgba(0, 0, 0, 0.5);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 2000;
     animation: fadeInOverlay 0.4s var(--ease-out) forwards;
   }
   .modal {
     background: var(--card-bg);
     border-radius: 20px;
     width: 80%;
     max-width: 800px;
     padding: 30px;
     box-shadow: 0 12px 24px rgba(0, 0, 0, 0.3);
     text-align: center;
     position: relative;
     animation: fadeInDialog 0.3s var(--ease-out) forwards;
   }
   @keyframes fadeInDialog {
     from { opacity: 0; transform: translateY(-20px); }
     to { opacity: 1; transform: translateY(0); }
   }
   .close-modal-button {
     position: absolute;
     top: 20px;
     right: 20px;
     background: #ff4d4d;
     color: #fff;
     width: 40px;
     height: 40px;
     border-radius: 50%;
     display: flex;
     align-items: center;
     justify-content: center;
     font-size: 18px;
     transition: background 0.3s var(--ease-out);
   }
   .close-modal-button:hover {
     background-color: #cc0000;
   }
   .modal-actions {
     display: flex;
     justify-content: flex-end;
     gap: 10px;
   }
   
   /* Confirmation Dialog */
   .confirmation-dialog-overlay {
     position: fixed;
     top: 0;
     left: 0;
     width: 100vw;
     height: 100vh;
     background: rgba(0, 0, 0, 0.5);
     display: flex;
     align-items: center;
     justify-content: center;
     z-index: 3000;
   }
   .confirmation-dialog {
     background: var(--card-bg);
     border-radius: 20px;
     padding: 30px;
     max-width: 400px;
     width: 90%;
     text-align: center;
     box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
     animation: fadeInDialog 0.3s var(--ease-out) forwards;
   }
   .confirmation-dialog p {
     margin-bottom: 20px;
     font-size: 14px;
     color: #555;
     line-height: 1.4;
   }
   .dialog-actions {
     display: flex;
     justify-content: flex-end;
     gap: 15px;
   }
   .dialog-actions .cancel-button,
   .dialog-actions .save-button {
     padding: 8px 14px;
     border-radius: 20px;
     font-size: 14px;
     font-weight: 600;
     color: #fff;
     transition: background-color 0.3s var(--ease-out), transform 0.2s var(--ease-out);
   }
   .dialog-actions .cancel-button {
     background-color: #ff4d4d;
   }
   .dialog-actions .cancel-button:hover {
     background-color: #cc0000;
     transform: translateY(-1px);
     box-shadow: 0 3px 6px var(--shadow-color);
   }
   .dialog-actions .save-button {
     background-color: #4caf50;
   }
   .dialog-actions .save-button:hover {
     background-color: #45a049;
     transform: translateY(-1px);
     box-shadow: 0 3px 6px var(--shadow-color);
   }
   
   /* Notification Toast */
   .notification {
     position: fixed;
     top: 20px;
     right: 20px;
     background-color: #4caf50;
     color: #fff;
     padding: 12px 20px;
     border-radius: 8px;
     box-shadow: 0 4px 12px var(--shadow-color);
     font-size: 14px;
     font-weight: 500;
     letter-spacing: 0.5px;
     animation: slideIn 0.5s var(--ease-out) forwards;
     z-index: 4000;
   }
   @keyframes slideIn {
     from { opacity: 0; transform: translateX(100%); }
     to { opacity: 1; transform: translateX(0); }
   }
   
   /* No Patient Found */
   .no-patient-found {
     text-align: center;
     margin-top: 50px;
   }
   .no-patient-content {
     display: flex;
     flex-direction: column;
     gap: 20px;
     align-items: center;
   }
   
   /* Print Styles */
   @media print {
     body {
       background: #fff;
     }
     .back-button,
     .favorite-button,
     .notes-actions-bar button,
     .share-button,
     .upload-button,
     .brain-files-filter,
     .remove-brain-file-button,
     .view-brain-file-button,
     .cancel-button,
     .confirmation-dialog-overlay,
     .notification,
     .modal-overlay {
       display: none !important;
     }
     .patient-detail-page {
       background: #fff;
     }
   }
   
   /* =============================================
      Responsive Design
      ============================================= */
   @media (max-width: 992px) {
     .patient-info-card {
       flex-direction: column;
       align-items: center;
       text-align: center;
     }
     .patient-photo {
       margin-bottom: 20px;
     }
   }
   @media (max-width: 576px) {
     .modal {
       padding: 30px 20px;
     }
   }
   